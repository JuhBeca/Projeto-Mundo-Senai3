<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alice no País das Probabilidades</title>
    <style>
        body {
            font-family: 'Times New Roman', serif;
            background-color: #f0f8ff;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            overflow: hidden;
            background-image: url('https://images.unsplash.com/photo-1518709766631-a6a7f45921c3?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');
            background-size: cover;
        }

        #start-screen, #game-screen, #end-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: rgba(240, 248, 255, 0.9);
            transition: all 0.5s;
        }

        #game-screen, #end-screen {
            display: none;
        }

        h1 {
            color: #8b0000;
            font-size: 3em;
            text-shadow: 2px 2px 4px #aaa;
            margin-bottom: 20px;
        }

        h2 {
            color: #4b0082;
            margin-bottom: 30px;
        }

        button {
            background-color: #ff69b4;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2em;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            margin: 10px;
        }

        button:hover {
            background-color: #ff1493;
            transform: scale(1.05);
        }

        input {
            padding: 12px;
            font-size: 1.2em;
            border: 2px solid #4b0082;
            border-radius: 5px;
            margin-bottom: 20px;
            width: 300px;
        }

        label {
            font-size: 1.3em;
            color: #4b0082;
            margin-bottom: 10px;
        }

        #question-container {
            background-color: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            width: 80%;
            max-width: 600px;
            margin-bottom: 30px;
            text-align: center;
        }

        #question {
            font-size: 1.5em;
            color: #4b0082;
            margin-bottom: 20px;
        }

        .options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .option {
            background-color: #e6e6fa;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.1em;
        }

        .option:hover {
            background-color: #d8bfd8;
            transform: scale(1.02);
        }

        #game-area {
            position: relative;
            width: 100%;
            height: 60%;
            margin-top: 20px;
        }

        #player {
            position: absolute;
            bottom: 50px;
            left: 100px;
            width: 80px;
            height: 120px;
            background-image: url('https://clipart-library.com/images/8ixKbxj8T.png');
            background-size: contain;
            background-repeat: no-repeat;
            transition: all 0.5s;
            z-index: 10;
        }

        #queen {
            position: absolute;
            bottom: 50px;
            right: -100px;
            width: 100px;
            height: 150px;
            background-image: url('https://clipart-library.com/images/8ixKbxj8T.png');
            background-size: contain;
            background-repeat: no-repeat;
            transform: scaleX(-1);
            transition: all 0.5s;
            z-index: 5;
        }

        #stats {
            display: flex;
            justify-content: space-between;
            width: 80%;
            margin-bottom: 20px;
            font-size: 1.2em;
            color: #4b0082;
        }

        #lives {
            color: #8b0000;
            font-weight: bold;
        }

        #score {
            color: #006400;
            font-weight: bold;
        }

        #progress {
            width: 80%;
            height: 20px;
            background-color: #e6e6fa;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        #progress-bar {
            height: 100%;
            width: 0%;
            background-color: #ff69b4;
            transition: width 0.5s;
        }

        #ranking {
            width: 80%;
            max-width: 500px;
            background-color: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            margin-top: 20px;
        }

        .ranking-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid #e6e6fa;
        }

        .ranking-header {
            font-weight: bold;
            color: #4b0082;
            border-bottom: 2px solid #4b0082;
        }

        #end-message {
            font-size: 2em;
            color: #8b0000;
            margin-bottom: 30px;
            text-align: center;
        }
    </style>
</head>
<body>
    <!-- Tela inicial -->
    <div id="start-screen">
        <h1>Alice no País das Probabilidades</h1>
        <h2>Fuja da Rainha de Copas!</h2>
        <label for="player-name">Digite seu nome:</label>
        <input type="text" id="player-name" placeholder="Alice">
        <button id="start-btn">Começar Jogo</button>
    </div>

    <!-- Tela de jogo -->
    <div id="game-screen">
        <div id="stats">
            <div>Vidas: <span id="lives">3</span></div>
            <div>Pontuação: <span id="score">0</span></div>
            <div>Progresso: <span id="correct-answers">0</span>/5</div>
        </div>
        <div id="progress">
            <div id="progress-bar"></div>
        </div>
        <div id="question-container">
            <div id="question">Carregando pergunta...</div>
            <div class="options" id="options">
                <!-- Opções serão inseridas aqui pelo JavaScript -->
            </div>
        </div>
        <div id="game-area">
            <div id="player"></div>
            <div id="queen"></div>
        </div>
    </div>

    <!-- Tela final -->
    <div id="end-screen">
        <h1 id="end-message"></h1>
        <h2>Sua pontuação: <span id="final-score">0</span></h2>
        <button id="restart-btn">Jogar Novamente</button>
        <div id="ranking">
            <h3>Ranking</h3>
            <div class="ranking-item ranking-header">
                <span>Nome</span>
                <span>Pontuação</span>
            </div>
            <div id="ranking-list">
                <!-- Itens do ranking serão inseridos aqui -->
            </div>
        </div>
    </div>

    <script>
        // Variáveis do jogo
        let playerName = "Alice";
        let lives = 3;
        let score = 0;
        let correctAnswers = 0;
        let currentQuestionIndex = 0;
        let questions = [];
        let ranking = JSON.parse(localStorage.getItem('ranking')) || [];

        // Elementos do DOM
        const startScreen = document.getElementById('start-screen');
        const gameScreen = document.getElementById('game-screen');
        const endScreen = document.getElementById('end-screen');
        const playerNameInput = document.getElementById('player-name');
        const startBtn = document.getElementById('start-btn');
        const restartBtn = document.getElementById('restart-btn');
        const questionElement = document.getElementById('question');
        const optionsElement = document.getElementById('options');
        const livesElement = document.getElementById('lives');
        const scoreElement = document.getElementById('score');
        const correctAnswersElement = document.getElementById('correct-answers');
        const progressBar = document.getElementById('progress-bar');
        const player = document.getElementById('player');
        const queen = document.getElementById('queen');
        const endMessage = document.getElementById('end-message');
        const finalScoreElement = document.getElementById('final-score');
        const rankingList = document.getElementById('ranking-list');

        // Perguntas sobre baralho
        const questionPool = [
            {
                question: "Qual a probabilidade de tirar um Ás de um baralho de 52 cartas?",
                options: ["1/13", "1/52", "4/52", "1/4"],
                answer: 2
            },
            {
                question: "Qual a chance de tirar uma carta de copas?",
                options: ["1/4", "13/52", "1/52", "1/13"],
                answer: 1
            },
            {
                question: "Qual a probabilidade de tirar uma figura (Valete, Dama ou Rei)?",
                options: ["3/13", "12/52", "1/13", "3/52"],
                answer: 1
            },
            {
                question: "Qual a chance de tirar uma carta vermelha?",
                options: ["1/4", "1/2", "1/13", "26/52"],
                answer: 1
            },
            {
                question: "Qual a probabilidade de tirar um 7 de ouros?",
                options: ["1/52", "1/13", "1/4", "4/52"],
                answer: 0
            },
            {
                question: "Qual a chance de tirar uma carta que não seja de espadas?",
                options: ["3/4", "13/52", "39/52", "1/4"],
                answer: 2
            },
            {
                question: "Qual a probabilidade de tirar uma carta par (2,4,6,8,10)?",
                options: ["5/13", "20/52", "5/52", "10/52"],
                answer: 1
            },
            {
                question: "Qual a chance de tirar uma carta preta ou um Ás?",
                options: ["28/52", "26/52", "30/52", "4/52"],
                answer: 0
            },
            {
                question: "Qual a probabilidade de tirar uma dama de copas ou o rei de espadas?",
                options: ["1/26", "2/52", "1/52", "1/13"],
                answer: 1
            },
            {
                question: "Qual a chance de tirar uma carta menor que 5 (Ás,2,3,4)?",
                options: ["4/13", "16/52", "1/13", "4/52"],
                answer: 1
            },
            {
                question: "Qual a probabilidade de tirar uma carta que não seja uma figura?",
                options: ["40/52", "12/52", "10/13", "1/4"],
                answer: 0
            },
            {
                question: "Qual a chance de tirar um valete ou uma carta de ouros?",
                options: ["16/52", "4/52", "13/52", "17/52"],
                answer: 0
            },
            {
                question: "Qual a probabilidade de tirar duas cartas vermelhas seguidas (sem reposição)?",
                options: ["(26/52)*(25/51)", "1/4", "26/52", "(13/52)*(12/51)"],
                answer: 0
            },
            {
                question: "Qual a chance de tirar um Ás ou um Rei?",
                options: ["8/52", "4/52", "2/13", "1/13"],
                answer: 2
            },
            {
                question: "Qual a probabilidade de tirar uma carta que seja tanto vermelha quanto de copas?",
                options: ["13/52", "1/4", "26/52", "1/2"],
                answer: 0
            },
            {
                question: "Qual a chance de tirar uma carta que não seja o Ás de espadas?",
                options: ["51/52", "1/52", "1/4", "13/52"],
                answer: 0
            },
            {
                question: "Qual a probabilidade de tirar uma carta de naipe diferente de copas?",
                options: ["39/52", "13/52", "1/4", "3/4"],
                answer: 3
            },
            {
                question: "Qual a chance de tirar uma carta que seja um número (não Ás ou figura)?",
                options: ["36/52", "9/13", "12/52", "16/52"],
                answer: 1
            },
            {
                question: "Qual a probabilidade de tirar uma carta preta e par?",
                options: ["10/52", "5/13", "20/52", "6/52"],
                answer: 0
            },
            {
                question: "Qual a chance de tirar uma carta que seja ou vermelha ou uma figura?",
                options: ["32/52", "26/52", "12/52", "6/52"],
                answer: 0
            },
            {
                question: "Qual a probabilidade de tirar um 10 ou uma carta de paus?",
                options: ["16/52", "4/52", "13/52", "17/52"],
                answer: 0
            },
            {
                question: "Qual a chance de tirar uma carta que não seja vermelha nem uma figura?",
                options: ["10/52", "20/52", "6/52", "16/52"],
                answer: 0
            },
            {
                question: "Qual a probabilidade de tirar uma carta maior que 7 (8,9,10,Valete,Dama,Rei)?",
                options: ["24/52", "6/13", "12/52", "6/52"],
                answer: 1
            },
            {
                question: "Qual a chance de tirar uma carta que seja tanto preta quanto um Ás?",
                options: ["2/52", "4/52", "1/13", "1/26"],
                answer: 0
            },
            {
                question: "Qual a probabilidade de tirar uma carta que não seja de ouros nem um Rei?",
                options: ["38/52", "13/52", "4/52", "16/52"],
                answer: 0
            },
            {
                question: "Qual a chance de tirar uma carta que seja um número primo (2,3,5,7)?",
                options: ["16/52", "4/13", "12/52", "1/13"],
                answer: 1
            },
            {
                question: "Qual a probabilidade de tirar uma carta que seja de copas ou um Ás?",
                options: ["16/52", "13/52", "4/52", "17/52"],
                answer: 0
            },
            {
                question: "Qual a chance de tirar uma carta que não seja um Valete?",
                options: ["48/52", "12/13", "4/52", "1/13"],
                answer: 1
            },
            {
                question: "Qual a probabilidade de tirar uma carta que seja tanto uma figura quanto vermelha?",
                options: ["6/52", "12/52", "3/13", "1/4"],
                answer: 0
            },
            {
                question: "Qual a chance de tirar uma carta que seja um múltiplo de 3 (3,6,9)?",
                options: ["12/52", "3/13", "4/52", "9/52"],
                answer: 1
            }
        ];

        // Inicializar o jogo
        function initGame() {
            playerName = playerNameInput.value || "Alice";
            lives = 3;
            score = 0;
            correctAnswers = 0;
            
            // Embaralhar perguntas e pegar as 30 primeiras
            questions = [...questionPool].sort(() => Math.random() - 0.5).slice(0, 30);
            currentQuestionIndex = 0;
            
            updateStats();
            showQuestion();
            
            // Resetar posições
            player.style.left = "100px";
            queen.style.right = "-100px";
            progressBar.style.width = "0%";
            
            startScreen.style.display = "none";
            gameScreen.style.display = "flex";
            endScreen.style.display = "none";
        }

        // Mostrar pergunta atual
        function showQuestion() {
            if (currentQuestionIndex >= questions.length || correctAnswers >= 5) {
                endGame();
                return;
            }
            
            const question = questions[currentQuestionIndex];
            questionElement.textContent = question.question;
            
            optionsElement.innerHTML = "";
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.classList.add('option');
                optionElement.textContent = option;
                optionElement.addEventListener('click', () => selectAnswer(index));
                optionsElement.appendChild(optionElement);
            });
        }

        // Selecionar resposta
        function selectAnswer(selectedIndex) {
            const question = questions[currentQuestionIndex];
            const options = optionsElement.querySelectorAll('.option');
            
            if (selectedIndex === question.answer) {
                // Resposta correta
                options[selectedIndex].style.backgroundColor = "#90ee90";
                score += 50;
                correctAnswers++;
                progressBar.style.width = `${(correctAnswers / 5) * 100}%";
                
                // Mover Alice para frente
                const currentLeft = parseInt(player.style.left);
                player.style.left = `${currentLeft + 30}px`;
                
                // Verificar se o jogador ganhou
                if (correctAnswers >= 5) {
                    setTimeout(() => {
                        endGame(true);
                    }, 1000);
                    return;
                }
            } else {
                // Resposta errada
                options[selectedIndex].style.backgroundColor = "#ff6b6b";
                options[question.answer].style.backgroundColor = "#90ee90";
                score = Math.max(0, score - 10);
                lives--;
                
                // Mover Rainha para perto
                const currentRight = parseInt(queen.style.right);
                queen.style.right = `${currentRight - 50}px`;
                
                // Verificar se o jogador perdeu
                if (lives <= 0) {
                    setTimeout(() => {
                        endGame(false);
                    }, 1000);
                    return;
                }
            }
            
            currentQuestionIndex++;
            updateStats();
            
            setTimeout(() => {
                showQuestion();
            }, 1500);
        }

        // Atualizar estatísticas
        function updateStats() {
            livesElement.textContent = lives;
            scoreElement.textContent = score;
            correctAnswersElement.textContent = `${correctAnswers}/5`;
        }

        // Finalizar jogo
        function endGame(win = false) {
            gameScreen.style.display = "none";
            endScreen.style.display = "flex";
            
            if (win) {
                endMessage.textContent = "Você escapou da Rainha de Copas!";
                endMessage.style.color = "#006400";
            } else {
                endMessage.textContent = "Cortem-lhe a cabeça!";
                endMessage.style.color = "#8b0000";
            }
            
            finalScoreElement.textContent = score;
            
            // Atualizar ranking
            updateRanking();
        }

        // Atualizar ranking
        function updateRanking() {
            ranking.push({ name: playerName, score: score });
            
            // Ordenar por pontuação (maior primeiro)
            ranking.sort((a, b) => b.score - a.score);
            
            // Manter apenas os 10 melhores
            if (ranking.length > 10) {
                ranking = ranking.slice(0, 10);
            }
            
            // Salvar no localStorage
            localStorage.setItem('ranking', JSON.stringify(ranking));
            
            // Exibir ranking
            rankingList.innerHTML = "";
            ranking.forEach((player, index) => {
                const item = document.createElement('div');
                item.classList.add('ranking-item');
                item.innerHTML = `<span>${index + 1}. ${player.name}</span><span>${player.score}</span>`;
                rankingList.appendChild(item);
            });
        }

        // Event listeners
        startBtn.addEventListener('click', initGame);
        restartBtn.addEventListener('click', initGame);
    </script>
</body>
</html> 